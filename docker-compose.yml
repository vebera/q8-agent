services:
  q8-agent:
    build: .
    container_name: q8-agent
    restart: unless-stopped
    ports:
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /opt/tenants:/opt/tenants
    environment:
      - Q8_AGENT_PORT=8080
      - Q8_AGENT_ADMIN_TOKEN=${Q8_AGENT_ADMIN_TOKEN:-secret-token-here}
      - Q8_TENANTS_ROOT=/opt/tenants
    networks:
      - q8-network

networks:
  q8-network:
    external: true
    name: q8-traefik-network # Assuming it needs to be on a shared network or reachable by main server
